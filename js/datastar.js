// Datastar v1.0.0-RC.11
var Be=/ðŸ–•JS_DSðŸš€/.source,de=Be.slice(0,5),Oe=Be.slice(4),F="datastar",Je="Datastar-Request",ze=1e3;var Qe=!1,Fe="outer",Ze="inner",Ye="remove",Xe="replace",et="prepend",tt="append",nt="before",it="after",st=Fe,ie="datastar-patch-elements",se="datastar-patch-signals";function pe(e){return e instanceof HTMLElement||e instanceof SVGElement}function Q(e){return e?.closest("[data-scoped]")?.dataset.scoped??null}var rt=e=>e.trim()==="true",C=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([a-z])([0-9]+)/gi,"$1-$2").replace(/([0-9]+)([a-z])/gi,"$1-$2").toLowerCase(),Z=e=>C(e).replace(/-./g,t=>t[1].toUpperCase()),re=e=>C(e).replace(/-/g,"_"),gn=e=>Z(e).replace(/(^.|(?<=\.).)/g,t=>t[0].toUpperCase()),me=e=>{try{return JSON.parse(e)}catch{return Function(`return (${e})`)()}},vn={kebab:C,snake:re,pascal:gn};function P(e,t){for(let n of t.get("case")||[]){let i=vn[n];i&&(e=i(e))}return e}function V(e,t,n){if(n.has("scoped")){let i=Q(t);i&&(e=`${i}.${e}`)}return e}var ot={type:"attribute",name:"computed",keyReq:"must",valReq:"must",isExpr:!0,onLoad:({key:e,mods:t,rx:n,root:i,computed:s})=>{e=P(e,t),i[e]=s(n)}};var at={type:"attribute",name:"effect",keyReq:"denied",valReq:"must",onLoad:({effect:e,rx:t})=>e(t)};var _=e=>e!==null&&typeof e=="object"&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null);function oe(e,t){for(let n in e){let i=e[n];_(i)?oe(i,t):e[n]=t(i)}}var g=(e,t)=>{for(let n in t){let i=n.split("."),s=i.pop(),r=i.reduce((a,c)=>a[c]??={},e);r[s]=t[n]}return e};var ct={type:"attribute",name:"signals",isExpr:!0,onLoad:({el:e,key:t,mods:n,rx:i,merge:s})=>{let r=n.has("ifmissing"),a=i(),c={ifMissing:r};if(n.has("scoped")){let o=Q(e);s(o?{[o]:a}:a,c)}else s(t!==""?g({},{[P(t,n)]:a}):a,c)}};var yn="https://data-star.dev/errors";function lt(e,t,n={}){let i=new Error;i.name=`${F} ${e} error`;let s=re(t),r=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),a=JSON.stringify(n,null,2);return i.message=`${t}
More info: ${yn}/${e}/${s}?${r}
Context: ${a}`,i}function Y(e,t,n={}){let i={plugin:{name:t.plugin.name,type:t.plugin.type}};return lt("init",e,Object.assign(i,n))}function ut(e,t,n={}){let i={plugin:{name:e.plugin.name,type:e.plugin.type},element:{id:e.el.id,tag:e.el.tagName},expression:{rawKey:e.rawKey,key:e.key,value:e.value,fnContent:e.fnContent}};return lt("runtime",t,Object.assign(i,n))}var ge=`${F}-signal-patch`;var X={},De=[],B=0,ve=0,Ie=0,j,ye=e=>Sn.bind(0,{previousValue:e,t:e,e:1}),dt=Symbol("computed"),En=e=>{let t=hn.bind(0,{e:17,getter:e});return t[dt]=1,t},bn=e=>{let t={d:e,e:2};j&&He(t,j);let n=G(t);try{t.d()}finally{G(n)}return yt.bind(0,t)},pt=e=>{let t=G(void 0),n=e();return G(t),n},Te=()=>{for(;ve<Ie;){let e=De[ve];De[ve++]=void 0,vt(e,e.e&=-65)}if(ve=0,Ie=0,Object.keys(X).length){let e=X;X={},document.dispatchEvent(new CustomEvent(ge,{detail:e}))}},ft=e=>"getter"in e?mt(e):gt(e,e.t),G=e=>{let t=j;return j=e,t},mt=e=>{let t=G(e);Et(e);try{let n=e.t;return n!==(e.t=e.getter(n))}finally{G(t),bt(e)}},gt=(e,t)=>(e.e=1,e.previousValue!==(e.previousValue=t)),$e=e=>{let t=e.e;if(!(t&64)){e.e=t|64;let n=e.r;n?$e(n.o):De[Ie++]=e}},vt=(e,t)=>{if(t&16||t&32&&ht(e.s,e)){let i=G(e);Et(e);try{e.d()}finally{G(i),bt(e)}return}t&32&&(e.e=t&-33);let n=e.s;for(;n;){let i=n.c,s=i.e;s&64&&vt(i,i.e=s&-65),n=n.n}},hn=e=>{let t=e.e;if(t&16||t&32&&ht(e.s,e)){if(mt(e)){let n=e.r;n&&he(n)}}else t&32&&(e.e=t&-33);return j&&He(e,j),e.t},Sn=(e,...t)=>{if(t.length){let n=t[0];if(e.t!==(e.t=n)){e.e=17;let i=e.r;i&&(Rn(i),B||Te())}}else{let n=e.t;if(e.e&16&&gt(e,n)){let i=e.r;i&&he(i)}return j&&He(e,j),n}},yt=e=>{let t=e.s;for(;t;)t=be(t,e);let n=e.r;n&&be(n),e.e=0},He=(e,t)=>{let n=t.a;if(n&&n.c===e)return;let i,s=t.e&4;if(s&&(i=n?n.n:t.s,i&&i.c===e)){t.a=i;return}let r=e.p;if(r&&r.o===t&&(!s||St(r,t)))return;let a=t.a=e.p={c:e,o:t,l:n,n:i,u:r};i&&(i.l=a),n?n.n=a:t.s=a,r?r.i=a:e.r=a},be=(e,t=e.o)=>{let n=e.c,i=e.l,s=e.n,r=e.i,a=e.u;if(s?s.l=i:t.a=i,i?i.n=s:t.s=s,r?r.u=a:n.p=a,a)a.i=r;else if(!(n.r=r))if("getter"in n){let c=n.s;if(c){n.e=17;do c=be(c,n);while(c)}}else"previousValue"in n||yt(n);return s},Rn=e=>{let t=e.i,n;e:for(;;){let i=e.o,s=i.e;if(s&3&&(s&60?s&12?s&4?!(s&48)&&St(e,i)?(i.e=s|40,s&=1):s=0:i.e=s&-9|32:s=0:i.e=s|32,s&2&&$e(i),s&1)){let r=i.r;if(r){e=r,r.i&&(n={t,f:n},t=e.i);continue}}if(e=t){t=e.i;continue}for(;n;)if(e=n.t,n=n.f,e){t=e.i;continue e}break}},Et=e=>{e.a=void 0,e.e=e.e&-57|4},bt=e=>{let t=e.a,n=t?t.n:e.s;for(;n;)n=be(n,e);e.e&=-5},ht=(e,t)=>{let n,i=0;e:for(;;){let s=e.c,r=s.e,a=!1;if(t.e&16)a=!0;else if((r&17)===17){if(ft(s)){let c=s.r;c.i&&he(c),a=!0}}else if((r&33)===33){(e.i||e.u)&&(n={t:e,f:n}),e=s.s,t=s,++i;continue}if(!a&&e.n){e=e.n;continue}for(;i;){--i;let c=t.r,o=c.i;if(o?(e=n.t,n=n.f):e=c,a){if(ft(t)){o&&he(c),t=e.o;continue}}else t.e&=-33;if(t=e.o,e.n){e=e.n;continue e}a=!1}return a}},he=e=>{do{let t=e.o,n=e.i,i=t.e;(i&48)===32&&(t.e=i|16,i&2&&$e(t)),e=n}while(e)},St=(e,t)=>{let n=t.a;if(n){let i=t.s;do{if(i===e)return!0;if(i===n)break;i=i.n}while(i)}return!1},Rt=e=>e.split(".").reduce((t,n)=>t[n],q);var ae=(e,t="")=>{let n={};for(let s in e){let r=ye(_(e[s])?ae(e[s],`${t+s}.`):e[s]);Object.defineProperty(r,"name",{get:()=>t+s}),n[s]=r}let i=ye(!0);return new Proxy(n,{get:(s,r)=>n[r]?.(),set:(s,r,a)=>{let c=n[r];if(c)pt(c)!==a&&g(X,{[t+r]:a}),c(_(a)?ae(a,`${t+r}.`):a);else{if(a?.[dt])Object.defineProperty(a,"name",{get:()=>t+r}),n[r]=a;else{let o=ye(_(a)?ae(a,`${t+r}.`):a);Object.defineProperty(o,"name",{get:()=>t+r}),n[r]=o}g(X,{[t+r]:a}),i(!i())}return!0},deleteProperty:(s,r)=>(delete n[r],g(X,{[t+r]:null}),i(!i()),!0),ownKeys:()=>(i(),Reflect.ownKeys(n))})},Tn=(e,{ifMissing:t}={})=>{B++;for(let n in e)e[n]===null?q[n]!==void 0&&!t&&delete q[n]:(q[n]===void 0||!t)&&Tt(e[n],n,q,t);!--B&&Te()},Tt=(e,t,n,i)=>{if(_(e)){_(n[t])||(n[t]=ae({}));for(let s in e)e[s]===null?n[t][s]!==void 0&&!i&&delete n[t][s]:(n[t][s]===void 0||!i)&&Tt(e[s],s,n[t],i)}else n[t]=e},At=(e,t,n)=>{for(let i in e)n.push(t+i),_(e[i])&&At(e[i],`${t+i}.`,n)};function An(e,t){let n=o=>typeof o=="string"?RegExp(o):o,i=n(e.include||/.*/),s=n(e.exclude||/(?!)/),r=[];At(t||q,"",r);let a=r.filter(o=>i.test(o)&&!s.test(o)),c={};for(let o of a)g(c,{[o]:Rt(o)});return c}var q=ae({}),Se={},Ee=[],xt=[],ke=null,ce="";function Mt(e){ce=e}function Lt(e){return ce?`data-${ce}-${e}`:`data-${e}`}var E={aliasify:Lt,actions:Se,root:q,filtered:An,computed:En,effect:bn,signal:ye,merge:Tn,peek:pt,getPath:Rt,removals:new Map,mods:new Map};function Ae(...e){for(let t of e)if(E.plugin=t,t.type==="action")Se[t.name]=t;else if(t.type==="attribute")Ee.push(t),t.onGlobalInit?.(E);else if(t.type==="watcher")t.onGlobalInit?.(E);else throw Y("InvalidPluginType",E);Ee.sort((t,n)=>{let i=n.name.length-t.name.length;return i!==0?i:t.name.localeCompare(n.name)}),xt=Ee.map(t=>RegExp(`^${t.name}([A-Z]|_|$)`))}function Re(e){for(let t of e)for(let n in t.dataset)wt(t,n,t.dataset[n])}function Ne(e=document.body){queueMicrotask(()=>{Re([e]),Re(e.querySelectorAll("*")),ke||(ke=new MutationObserver(xn),ke.observe(e,{subtree:!0,childList:!0,attributes:!0}))})}function wt(e,t,n){let i=Z(ce?t.slice(ce.length):t),s=Ee.find((r,a)=>xt[a].test(i));if(s){E.plugin=s;let[r,...a]=i.slice(s.name.length).split(/\_\_+/),c=!!r;c&&(r=Z(r));let o=!!n;E.mods.clear(),E.key=r,E.rawKey=i,E.value=n,E.el=e,E.runtimeErr=ut.bind(0,E),E.rx=Mn(E);let l=s.keyReq||"allowed";if(c){if(l==="denied")throw E.runtimeErr(`${s.name}KeyNotAllowed`)}else if(l==="must")throw E.runtimeErr(`${s.name}KeyRequired`);let f=s.valReq||"allowed";if(o){if(f==="denied")throw E.runtimeErr(`${s.name}ValueNotAllowed`)}else if(f==="must")throw E.runtimeErr(`${s.name}ValueRequired`);if(l==="exclusive"||f==="exclusive"){if(c&&o)throw E.runtimeErr(`${s.name}KeyAndValueProvided`);if(!c&&!o)throw E.runtimeErr(`${s.name}KeyOrValueRequired`)}for(let u of a){let[v,...p]=u.split(".");E.mods.set(Z(v),new Set(p.map(b=>b.toLowerCase())))}B++;let d=s.onLoad(E);if(!--B&&Te(),d){let u=E.removals.get(e);u?u.get(i)?.():(u=new Map,E.removals.set(e,u)),u.set(i,d)}}}function xn(e){let t=`[${Lt("ignore")}]`;for(let{target:n,type:i,attributeName:s,addedNodes:r,removedNodes:a}of e)if(i==="childList"){for(let c of a)if(pe(c)){let o=E.removals.get(c);if(E.removals.delete(c)){for(let l of o.values())l();o.clear()}}for(let c of r)pe(c)&&(Re([c]),Re(c.querySelectorAll("*")))}else if(i==="attributes"&&pe(n)&&!n.closest(t)){let c=Z(s.slice(5)),o=n.getAttribute(s);if(o===null){let l=E.removals.get(n);l&&(l.get(c)?.(),l.delete(c))}else wt(n,c,o)}}function Mn(e){let t="",n=e.plugin||void 0;if(n?.isExpr){let d=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|\(\s*((function)\s*\(\s*\)|(\(\s*\))\s*=>)\s*(?:\{[\s\S]*?\}|[^;)\{]*)\s*\)\s*\(\s*\)|[^;])+/gm,u=e.value.trim().match(d);if(u){let v=u.length-1,p=u[v].trim();p.startsWith("return")||(u[v]=`return (${p});`),t=u.join(`;
`)}}else t=e.value.trim();t=t.replace(/\$\$([a-zA-Z_][\w.-]*(?:\.[a-zA-Z_][\w.-]*)*?)(?=\s|$|[^\w.-])/g,(d,u)=>{let v=Q(e.el);return v?`$${v}.${u}`:`$${u}`}),t=t.replace(/\$([a-zA-Z_][\w.-]*(?:\.[a-zA-Z_][\w.-]*)*?)(?=\s|$|[^\w.-])/g,(d,u)=>u.endsWith("-")&&d.length<t.length&&t[t.indexOf(d)+d.length]==="$"?(u=u.slice(0,-1),`${u.split(".").reduce((b,M)=>`${b}['${M}']`,"$")}-`):u.split(".").reduce((p,b)=>`${p}['${b}']`,"$"));let i=new Map,s=RegExp(`(?:${de})(.*?)(?:${Oe})`,"gm");for(let d of t.matchAll(s)){let u=d[1],v=`dsEscaped${Ln(u)}`;i.set(v,u),t=t.replace(de+u+Oe,v)}let r=(d,u)=>`${d}${re(u).replaceAll(/\./g,"_")}`,a=new Set,c=RegExp(`@(${Object.keys(Se).join("|")})\\(`,"gm"),o=[...t.matchAll(c)],l=new Set,f=new Set;if(o.length){let d=`${F}Act_`;for(let u of o){let v=u[1],p=Se[v];if(!p)continue;a.add(v);let b=r(d,v);t=t.replace(`@${v}(`,`${b}(`),l.add(b),f.add((...M)=>p.fn(e,...M))}}for(let[d,u]of i)t=t.replace(d,u);e.fnContent=t;try{let d=Function("el","$",...n?.argNames||[],...l,t);return(...u)=>{try{B++;let v=d(e.el,q,...u,...f);return!--B&&Te(),v}catch(v){throw e.runtimeErr("ExecuteExpression",{error:v.message})}}}catch(d){throw e.runtimeErr("GenerateExpression",{error:d.message})}}function Ln(e){let t=5831,n=e.length;for(;n--;)t+=(t<<5)+e.charCodeAt(n);return(t>>>0).toString(36)}Ae(ct,ot,at);var W=`${F}-sse`,xe="started",Me="finished",Ct="error",Pt="retrying",Ot="retrying";function Le(e,t){document.addEventListener(W,n=>{if(n.detail.type===e){let{argsRaw:i}=n.detail;t(i)}})}var J=(e,t,n)=>document.dispatchEvent(new CustomEvent(W,{detail:{type:e,el:t,argsRaw:n}})),Ft=e=>`${e}`.includes("text/event-stream"),Dt=async({el:e,evt:t,filtered:n,runtimeErr:i},s,r,{headers:a={},contentType:c="json",selector:o,includeSignals:l=/.*/,excludeSignals:f=/(^|\.)_/,openWhenHidden:d=!1,retryInterval:u=ze,retryScaler:v=2,retryMaxWaitMs:p=3e4,retryMaxCount:b=10,abort:M=void 0})=>{let h=s.toLowerCase(),T=()=>{};try{if(!r?.length)throw i("SseNoUrlProvided",{action:h});let y={Accept:"text/event-stream, text/html, application/json",[Je]:!0};c==="json"&&(y["Content-Type"]="application/json");let x=Object.assign({},y,a),S={method:s,headers:x,openWhenHidden:d,retryInterval:u,retryScaler:v,retryMaxWaitMs:p,retryMaxCount:b,signal:M,onopen:async m=>{m.status>=400&&J(Ct,e,{status:m.status.toString()})},onmessage:m=>{if(!m.event.startsWith(F))return;let I=m.event,k={};for(let w of m.data.split(`
`)){let A=w.indexOf(" "),H=w.slice(0,A),N=w.slice(A+1);(k[H]||=[]).push(N)}let $=Object.fromEntries(Object.entries(k).map(([w,A])=>[w,A.join(`
`)]));J(I,e,$)},onerror:m=>{if(Ft(m))throw i("InvalidContentType",{url:r});m&&(console.error(m.message),J(Pt,e,{message:m.message}))}},R=new URL(r,window.location.href),L=new URLSearchParams(R.search);if(c==="json"){let m=JSON.stringify(n({include:l,exclude:f}));s==="GET"?L.set(F,m):S.body=m}else if(c==="form"){let m=o?document.querySelector(o):e.closest("form");if(!m)throw i(o?"SseFormNotFound":"SseClosestFormNotFound",{action:h,selector:o});if(!m.checkValidity()){m.reportValidity(),T();return}let I=new FormData(m),k=e;if(e===m&&t instanceof SubmitEvent)k=t.submitter;else{let A=H=>H.preventDefault();m.addEventListener("submit",A),T=()=>m.removeEventListener("submit",A)}if(k instanceof HTMLButtonElement){let A=k.getAttribute("name");A&&I.append(A,k.value)}let $=m.getAttribute("enctype")==="multipart/form-data";$||(x["Content-Type"]="application/x-www-form-urlencoded");let w=new URLSearchParams(I);if(s==="GET")for(let[A,H]of w)L.append(A,H);else $?S.body=I:S.body=w}else throw i("SseInvalidContentType",{action:h,contentType:c});J(xe,e,{}),R.search=L.toString();try{await Fn(R.toString(),e,S)}catch(m){if(!Ft(m))throw i("SseFetchFailed",{method:s,url:r,error:m})}}finally{J(Me,e,{}),T()}};async function wn(e,t){let n=e.getReader(),i=await n.read();for(;!i.done;)t(i.value),i=await n.read()}function Cn(e){let t,n,i,s=!1;return function(a){t?t=On(t,a):(t=a,n=0,i=-1);let c=t.length,o=0;for(;n<c;){s&&(t[n]===10&&(o=++n),s=!1);let l=-1;for(;n<c&&l===-1;++n)switch(t[n]){case 58:i===-1&&(i=n-o);break;case 13:s=!0;case 10:l=n;break}if(l===-1)break;e(t.subarray(o,l),i),o=n,i=-1}o===c?t=void 0:o&&(t=t.subarray(o),n-=o)}}function Pn(e,t,n){let i=kt(),s=new TextDecoder;return function(a,c){if(!a.length)n?.(i),i=kt();else if(c>0){let o=s.decode(a.subarray(0,c)),l=c+(a[c+1]===32?2:1),f=s.decode(a.subarray(l));switch(o){case"data":i.data=i.data?`${i.data}
${f}`:f;break;case"event":i.event=f;break;case"id":e(i.id=f);break;case"retry":{let d=+f;Number.isNaN(d)||t(i.retry=d);break}}}}}var On=(e,t)=>{let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n},kt=()=>({data:"",event:"",id:"",retry:void 0});function Fn(e,t,{signal:n,headers:i,onopen:s,onmessage:r,onclose:a,onerror:c,openWhenHidden:o,fetch:l,retryInterval:f=1e3,retryScaler:d=2,retryMaxWaitMs:u=3e4,retryMaxCount:v=10,overrides:p,...b}){return new Promise((M,h)=>{let T={accept:"text/event-stream",...i},y;function x(){y.abort(),document.hidden||$()}o||document.addEventListener("visibilitychange",x);let S=0;function R(){document.removeEventListener("visibilitychange",x),window.clearTimeout(S),y.abort()}n?.addEventListener("abort",()=>{R(),M()});let L=l||window.fetch,m=s||(()=>{}),I=0,k=f;async function $(){y=new AbortController;try{let w=await L(e,{...b,headers:T,signal:y.signal});I=0,f=k,await m(w);let A=async(N,We,pn,Ke,...mn)=>{let Ue={[pn]:await We.text()};for(let Ce of mn){let Pe=We.headers.get(`datastar-${C(Ce)}`);if(Ke){let fe=Ke[Ce];fe&&(Pe=typeof fe=="string"?fe:JSON.stringify(fe))}Pe&&(Ue[Ce]=Pe)}J(N,t,Ue),R()},H=w.headers.get("Content-Type");if(H?.includes("text/html"))return await A(ie,w,"elements",p,"selector","mergeMode","useViewTransition");if(H?.includes("application/json"))return await A(se,w,"signals",p,"onlyIfMissing","mergeMode","useViewTransition");await wn(w.body,Cn(Pn(N=>{N?T["last-event-id"]=N:delete T["last-event-id"]},N=>{k=f=N},r))),a?.(),R(),M()}catch(w){if(!y.signal.aborted)try{let A=c?.(w)||f;window.clearTimeout(S),S=window.setTimeout($,A),f=Math.min(f*d,u),++I>=v?(J(Ot,t,{}),R(),h("Max retries reached.")):console.error(`Datastar failed to reach ${e.toString()} retrying in ${A}ms.`)}catch(A){R(),h(A)}}}$()})}var D=(e,t)=>({type:"action",name:e,fn:(n,i,s)=>Dt(n,t,i,s)});var It=D("delete","DELETE");var $t=D("get","GET");var Ht=D("patch","PATCH");var Nt=D("post","POST");var Vt=D("put","PUT");var Ve=!!document.startViewTransition;function K(e,t){if(t.has("viewtransition")&&Ve){let n=e;e=(...i)=>document.startViewTransition(()=>n(...i))}return e}var ue=e=>"",Wt={type:"watcher",name:ie,async onGlobalInit(e){ue=e.aliasify,Le(ie,t=>Dn(e,t))}},kn=new DOMParser;function Dn(e,{elements:t,selector:n,mode:i=st,useViewTransition:s}){let r;t.includes("<script")?r=kn.parseFromString(`<body><template>${t}</template></body>`,"text/html").body.querySelector("template"):(r=document.createElement("template"),r.innerHTML=t);for(let a of r.content.childNodes){let c=a.nodeType;if(c!==1){if(c===3&&!a.nodeValue.trim())continue;throw Y("NoElementsFound",e)}let o=n||`[id="${a.id}"]`,l=document.querySelectorAll(o);if(!l.length)throw Y("NoTargetsFound",e,{selectorOrId:o});s&&Ve?document.startViewTransition(()=>_t(e,i,a,l)):_t(e,i,a,l)}}function _t(e,t,n,i){switch(t){case Fe:{for(let s of i)qt(s,n);break}case Ze:for(let s of i)qt(s,n,"inner");break;case Ye:for(let s of i)s.remove();break;case Xe:for(let s of i)s.replaceWith(n.cloneNode(!0));break;case et:for(let s of i)s.prepend(n.cloneNode(!0));break;case tt:for(let s of i)s.append(n.cloneNode(!0));break;case nt:for(let s of i)s.before(n.cloneNode(!0));break;case it:for(let s of i)s.after(n.cloneNode(!0));break;default:throw Y("InvalidPatchMode",e,{mode:t})}}var ee=new Map,O=new Map,te=new Set,le=new Set,ne=document.createElement("div");ne.hidden=!0;function qt(e,t,n="outer"){let i=ue("ignore-morph");if(e.hasAttribute(i)&&t.hasAttribute(i)||e.parentElement?.closest(`[${i}]`))return;let s=document.createElement("div");s.append(t),document.body.insertAdjacentElement("afterend",ne);let r=e.querySelectorAll("[id]");for(let{id:c,tagName:o}of r)ee.has(c)?le.add(c):ee.set(c,o);e.id&&(ee.has(e.id)?le.add(e.id):ee.set(e.id,e.tagName)),te.clear();let a=s.querySelectorAll("[id]");for(let{id:c,tagName:o}of a)te.has(c)?le.add(c):ee.get(c)===o&&te.add(c);ee.clear();for(let c of le)te.delete(c);le.clear(),O.clear(),Gt(n==="outer"?e.parentElement:e,r),Gt(s,a),Kt(n==="outer"?e.parentElement:e,s,n==="outer"?e:null,e.nextSibling),ne.remove()}function Kt(e,t,n=null,i=null){e instanceof HTMLTemplateElement&&t instanceof HTMLTemplateElement&&(e=e.content,t=t.content),n??=e.firstChild;for(let s of t.childNodes){if(n&&n!==i){let a=In(s,n,i);if(a){if(a!==n){let c=n;for(;c&&c!==a;){let o=c;c=c.nextSibling,qe(o)}}_e(a,s),n=a.nextSibling;continue}}let r=s.id;if(s instanceof Element&&te.has(r)){let a=window[r],c=a;for(;c=c.parentNode;){let o=O.get(c);o&&(o.delete(r),o.size||O.delete(c))}Ut(e,a,n),_e(a,s),n=a.nextSibling;continue}if(O.has(s)){let a=document.createElement(s.tagName);e.insertBefore(a,n),_e(a,s),n=a.nextSibling}else{let a=document.importNode(s,!0);e.insertBefore(a,n),n=a.nextSibling}}for(;n&&n!==i;){let s=n;n=n.nextSibling,qe(s)}}function In(e,t,n){let i=null,s=e.nextSibling,r=0,a=0,c=O.get(e)?.size||0,o=t;for(;o&&o!==n;){if(jt(o,e)){let l=!1,f=O.get(o),d=O.get(e);if(d&&f){for(let u of f)if(d.has(u)){l=!0;break}}if(l)return o;if(!i&&!O.has(o)){if(!c)return o;i=o}}if(a+=O.get(o)?.size||0,a>c||(i===null&&s&&jt(o,s)&&(r++,s=s.nextSibling,r>=2&&(i=void 0)),o.contains(document.activeElement)))break;o=o.nextSibling}return i||null}function jt(e,t){let n=e.id;return e.nodeType===t.nodeType&&e.tagName===t.tagName&&(!n||n===t.id)}function qe(e){O.has(e)?Ut(ne,e,null):e.parentNode?.removeChild(e)}var Ut=qe.call.bind(ne.moveBefore??ne.insertBefore);function _e(e,t){let n=t.nodeType;if(n===1){let i=ue("ignore-morph");if(e.hasAttribute(i)&&t.hasAttribute(i))return e;let s=t.getAttribute(ue("preserve-attr"))?.split(" "),r=t.attributes;for(let{name:c,value:o}of r)e[c]!==o&&!s?.includes(C(c))&&e.setAttribute(c,o);let a=e.attributes;for(let c=a.length-1;c>=0;c--){let{name:o}=a[c];!r[o]&&!s?.includes(C(o))&&e.removeAttribute(o)}if(e instanceof HTMLInputElement&&t instanceof HTMLInputElement&&t.type!=="file"){if(!Object.keys(t.dataset).some(String.prototype.startsWith.bind(ue("bind").slice(5)))){let c=t.value;t.hasAttribute("value")?e.value!==c&&(e.setAttribute("value",c),e.value=c):(e.value="",e.removeAttribute("value"))}}else if(e instanceof HTMLTextAreaElement&&t instanceof HTMLTextAreaElement){let c=t.value;c!==e.value&&(e.value=c),e.firstChild&&e.firstChild.nodeValue!==c&&(e.firstChild.nodeValue=c)}}return(n===8||n===3)&&e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue),e.isEqualNode(t)||Kt(e,t),e}function Gt(e,t){for(let n of t)if(te.has(n.id)){let i=n;for(;i&&i!==e;){let s=O.get(i);s||(s=new Set,O.set(i,s)),s.add(n.id),i=i.parentElement}}}var Bt={type:"watcher",name:se,onGlobalInit:e=>Le(se,({signals:t="{}",onlyIfMissing:n=`${Qe}`})=>e.merge(me(t),{ifMissing:rt(n)}))};var Jt={type:"attribute",name:"attr",valReq:"must",isExpr:!0,onLoad:({el:e,effect:t,key:n,rx:i})=>{let s=(o,l)=>{l===""||l===!0?e.setAttribute(o,""):l===!1||l===null||l===void 0?e.removeAttribute(o):e.setAttribute(o,l)};if(n===""){let o=new MutationObserver(()=>{o.disconnect();let f=i();for(let[d,u]of Object.entries(f))s(d,u);o.observe(e,{attributeFilter:Object.keys(f)})}),l=t(()=>{o.disconnect();let f=i();for(let d in f)s(d,f[d]);o.observe(e,{attributeFilter:Object.keys(f)})});return()=>{o.disconnect(),l()}}let r=C(n),a=new MutationObserver(()=>{a.disconnect();let o=i();s(r,o),a.observe(e,{attributeFilter:[o]})}),c=t(()=>{a.disconnect();let o=i();s(r,o),a.observe(e,{attributeFilter:[o]})});return()=>{a.disconnect(),c()}}};var $n=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,Hn=/email|password|search|tel|text|url/,Nn=/number|range/,zt={type:"attribute",name:"bind",keyReq:"exclusive",valReq:"exclusive",onLoad:({el:e,key:t,mods:n,value:i,effect:s,merge:r,runtimeErr:a,aliasify:c,getPath:o})=>{let l=t?P(t,n):i;l=V(l,e,n);let f=o(l),d=Array.isArray(f);if(e instanceof HTMLInputElement&&Hn.test(e.type)||e instanceof HTMLTextAreaElement){if(d){let M=n.has("scoped")?"__scoped":"",h=document.querySelectorAll(`[${c("bind")}${M}-${t}],[${c("bind")}${M}="${i}"]`),T=0,y=[...f];for(let R of h){if(y[T]||(y[T]=R.value),e===R)break;T++}r(g({},{[l]:y}));let x=()=>{let R=[...o(l)];R[T]=e.value,r(g({},{[l]:R}))};e.addEventListener("change",x),e.addEventListener("input",x);let S=s(()=>e.value=o(l)[T]);return()=>{S(),e.removeEventListener("change",x),e.removeEventListener("input",x)}}r(g({},{[l]:e.value}),{ifMissing:!0});let p=()=>r(g({},{[l]:e.value}));e.addEventListener("change",p),e.addEventListener("input",p);let b=s(()=>e.value=o(l));return()=>{b(),e.removeEventListener("change",p),e.removeEventListener("input",p)}}if(e instanceof HTMLInputElement){if(e.type==="checkbox"){if(d){let h=n.has("scoped")?"__scoped":"",T=document.querySelectorAll(`[${c("bind")}${h}-${t}],[${c("bind")}${h}="${i}"]`),y=0,x=[...f];for(let L of T){if(!x[y]){let m=L.getAttribute("value");x[y]=m?L.checked?m:"":L.checked}if(e===L)break;y++}r(g({},{[l]:x}));let S=()=>{let L=[...o(l)],m=e.getAttribute("value");L[y]=m?e.checked?m:"":e.checked,r(g({},{[l]:L}))};e.addEventListener("change",S),e.addEventListener("input",S);let R=s(()=>{let L=e.getAttribute("value");e.checked=L?L===o(l)[y]:o(l)[y]});return()=>{R(),e.removeEventListener("change",S),e.removeEventListener("input",S)}}let p=e.getAttribute("value");r(g({},{[l]:p?e.checked?p:"":e.checked}));let b=()=>{let h=e.getAttribute("value");r(g({},{[l]:h?e.checked?h:"":e.checked}))};e.addEventListener("change",b),e.addEventListener("input",b);let M=s(()=>{let h=e.getAttribute("value");e.checked=h?h===o(l):o(l)});return()=>{M(),e.removeEventListener("change",b),e.removeEventListener("input",b)}}if(e.type==="radio"){e.getAttribute("name")?.length||e.setAttribute("name",l),r(g({},{[l]:e.value}),{ifMissing:!0});let p=()=>e.checked&&r(g({},{[l]:e.value}));e.addEventListener("change",p),e.addEventListener("input",p);let b=s(()=>e.checked=e.value===o(l));return()=>{b(),e.removeEventListener("change",p),e.removeEventListener("input",p)}}if(Nn.test(e.type)){r(g({},{[l]:+e.value}),{ifMissing:!0});let p=()=>r(g({},{[l]:+e.value}));e.addEventListener("change",p),e.addEventListener("input",p);let b=s(()=>e.value=o(l));return()=>{b(),e.removeEventListener("change",p),e.removeEventListener("input",p)}}if(e.type==="file"){let p=()=>{let b=[...e.files||[]],M=[],h=[],T=[];Promise.all(b.map(y=>new Promise(x=>{let S=new FileReader;S.onload=()=>{if(typeof S.result!="string")throw a("InvalidFileResultType",{resultType:typeof S.result});let R=S.result.match($n);if(!R?.groups)throw a("InvalidDataUri",{result:S.result});M.push(R.groups.contents),h.push(R.groups.mime),T.push(y.name)},S.onloadend=()=>x(),S.readAsDataURL(y)}))).then(()=>{r(g({},{[l]:M,[`${l}Mimes`]:h,[`${l}Names`]:T}))})};return e.addEventListener("change",p),e.addEventListener("input",p),()=>{e.removeEventListener("change",p),e.removeEventListener("input",p)}}}if(e instanceof HTMLSelectElement){if(e.multiple){r(g({},{[l]:[...e.selectedOptions].map(y=>y.value)}),{ifMissing:!0});let h=()=>r(g({},{[l]:[...e.selectedOptions].map(y=>y.value)}));e.addEventListener("change",h),e.addEventListener("input",h);let T=s(()=>{let y=o(l);for(let x of e.options)x.selected=y.includes(x.value)});return()=>{T(),e.removeEventListener("change",h),e.removeEventListener("input",h)}}r(g({},{[l]:e.value}),{ifMissing:!0});let p=()=>r(g({},{[l]:e.value}));e.addEventListener("change",p),e.addEventListener("input",p);let M=s(()=>e.value=o(l));return()=>{M(),e.removeEventListener("change",p),e.removeEventListener("input",p)}}r(g({},{[l]:e.getAttribute("value")}),{ifMissing:!0});let u=new MutationObserver(()=>{r(g({},{[l]:e.getAttribute("value")}))});u.observe(e,{attributeFilter:["value"]});let v=s(()=>e.setAttribute("value",o(l)));return()=>{v(),u.disconnect()}}};var Qt={type:"attribute",name:"class",valReq:"must",isExpr:!0,onLoad:({key:e,el:t,effect:n,mods:i,rx:s})=>{if(e===""){let o=new MutationObserver(()=>{o.disconnect();let f=s();for(let[d,u]of Object.entries(f)){let v=d.split(/\s+/);u?t.classList.add(...v):t.classList.remove(...v)}o.observe(t,{attributeFilter:["class"]})}),l=n(()=>{o.disconnect();let f=s();for(let[d,u]of Object.entries(f)){let v=d.split(/\s+/);u?t.classList.add(...v):t.classList.remove(...v)}o.observe(t,{attributeFilter:["class"]})});return()=>{o.disconnect(),l()}}let r=C(e);r=P(r,i);let a=new MutationObserver(()=>{a.disconnect(),s()?t.classList.add(r):t.classList.remove(r),a.observe(t,{attributeFilter:["class"]})}),c=n(()=>{a.disconnect(),s()?t.classList.add(r):t.classList.remove(r),a.observe(t,{attributeFilter:["class"]})});return()=>{a.disconnect(),c()}}};var Vn=0,Zt={type:"attribute",name:"scoped",keyReq:"denied",onLoad:({el:e,value:t,mods:n,merge:i})=>{let s=t||`_${e.closest("[id]")?.id||crypto.randomUUID()}${Vn++}`;return e.parentElement&&(s=V(s,e.parentElement,n)),i({[s]:{}}),()=>{i({[s]:null})}}};var Yt={type:"attribute",name:"indicator",keyReq:"exclusive",valReq:"exclusive",onLoad:({el:e,key:t,mods:n,merge:i,value:s})=>{let r=t?P(t,n):s;r=V(r,e,n),i(g({},{[r]:!1}),{ifMissing:!0});let a=c=>{let{type:o,el:l}=c.detail;if(l===e)switch(o){case xe:i(g({},{[r]:!0}));break;case Me:i(g({},{[r]:!1}));break}};return document.addEventListener(W,a),()=>{i(g({},{[r]:!1})),document.removeEventListener(W,a)}}};var Xt={type:"attribute",name:"jsonSignals",keyReq:"denied",onLoad:({el:e,root:t,value:n,effect:i,filtered:s,mods:r})=>{let a=r.has("terse")?0:2,c=new MutationObserver(()=>{c.disconnect(),e.textContent=JSON.stringify(t,null,2),c.observe(e,{childList:!0})}),o={};n.length&&(o=me(n));let l=i(()=>{c.disconnect();let f=s(o);e.textContent=JSON.stringify(f,null,a),c.observe(e,{childList:!0})});return()=>{c.disconnect(),l()}}};function U(e){if(!e||e.size<=0)return 0;for(let t of e){if(t.endsWith("ms"))return+t.replace("ms","");if(t.endsWith("s"))return+t.replace("s","")*1e3;try{return Number.parseFloat(t)}catch{}}return 0}function z(e,t,n=!1){return e?e.has(t.toLowerCase()):n}function je(e,t){return(...n)=>{setTimeout(()=>{e(...n)},t)}}function _n(e,t,n=!1,i=!0){let s=0;return(...r)=>{s&&clearTimeout(s),n&&!s&&e(...r),s=setTimeout(()=>{i&&e(...r),s&&clearTimeout(s)},t)}}function qn(e,t,n=!0,i=!1){let s=!1;return(...r)=>{s||(n&&e(...r),s=!0,setTimeout(()=>{s=!1,i&&e(...r)},t))}}function we(e,t){let n=t.get("delay");if(n){let r=U(n);e=je(e,r)}let i=t.get("debounce");if(i){let r=U(i),a=z(i,"leading",!1),c=!z(i,"notrail",!1);e=_n(e,r,a,c)}let s=t.get("throttle");if(s){let r=U(s),a=!z(s,"noleading",!1),c=z(s,"trail",!1);e=qn(e,r,a,c)}return e}var en={type:"attribute",name:"on",keyReq:"must",valReq:"must",argNames:["evt"],onLoad:e=>{let{el:t,key:n,mods:i,rx:s}=e,r=t;i.has("window")&&(r=window);let a=l=>{if(l){if(i.has("prevent")&&l.preventDefault(),i.has("stop")&&l.stopPropagation(),!(l.isTrusted||l instanceof CustomEvent||i.has("trust")))return;e.evt=l}s(l)};a=we(a,i),a=K(a,i);let c={capture:i.has("capture"),passive:i.has("passive"),once:i.has("once")};if(i.has("outside")){r=document;let l=a;a=f=>{t.contains(f?.target)||l(f)}}let o=C(n);if(o=P(o,i),(o===W||o===ge)&&(r=document),t instanceof HTMLFormElement&&o==="submit"){let l=a;a=f=>{f?.preventDefault(),l(f)}}return r.addEventListener(o,a,c),()=>{r.removeEventListener(o,a)}}};var Ge=new WeakSet,tn={type:"attribute",name:"onIntersect",keyReq:"denied",onLoad:({el:e,mods:t,rx:n})=>{let i=()=>n();i=we(i,t),i=K(i,t);let s={threshold:0};t.has("full")?s.threshold=1:t.has("half")&&(s.threshold=.5);let r=new IntersectionObserver(a=>{for(let c of a)c.isIntersecting&&(i(),r&&Ge.has(e)&&r.disconnect())},s);return r.observe(e),t.has("once")&&Ge.add(e),()=>{t.has("once")||Ge.delete(e),r&&(r.disconnect(),r=null)}}};var nn={type:"attribute",name:"onInterval",keyReq:"denied",valReq:"must",onLoad:({mods:e,rx:t})=>{let n=()=>t();n=K(n,e);let i=1e3,s=e.get("duration");s&&(i=U(s),z(s,"leading",!1)&&n());let r=setInterval(n,i);return()=>{clearInterval(r)}}};var sn={type:"attribute",name:"onLoad",keyReq:"denied",valReq:"must",onLoad:({rx:e,mods:t})=>{let n=()=>e();n=K(n,t);let i=0,s=t.get("delay");s&&(i=U(s)),n=je(n,i),n()}};var rn={type:"attribute",name:"ref",keyReq:"exclusive",valReq:"exclusive",onLoad:({key:e,mods:t,value:n,el:i,merge:s})=>{let r=e?P(e,t):n;r=V(r,i,t),s(g({},{[r]:i}))}};var on="none",an="display",cn={type:"attribute",name:"show",keyReq:"denied",valReq:"must",isExpr:!0,onLoad:({el:e,effect:t,rx:n})=>{let i=()=>{s.disconnect(),n()?e.style.display===on&&e.style.removeProperty(an):e.style.setProperty(an,on),s.observe(e,{attributeFilter:["style"]})},s=new MutationObserver(i),r=t(i);return()=>{s.disconnect(),r()}}};var ln={type:"attribute",name:"text",keyReq:"denied",valReq:"must",isExpr:!0,onLoad:({el:e,effect:t,rx:n})=>{let i=()=>{s.disconnect(),e.textContent=`${n()}`,s.observe(e,{childList:!0})},s=new MutationObserver(i),r=t(i);return()=>{s.disconnect(),r()}}};var un={type:"action",name:"peek",fn:({peek:e},t)=>e(t)};var fn={type:"action",name:"setAll",fn:({merge:e,filtered:t},n,i,s=/(?!)/)=>{let r=t({include:n,exclude:s});oe(r,()=>i),e(r)}};var dn={type:"action",name:"toggleAll",fn:({merge:e,filtered:t},n)=>{let i=t({include:n});oe(i,s=>!s),e(i)}};Ae($t,Nt,Vt,Ht,It,Wt,Bt,Jt,zt,Qt,Zt,Yt,Xt,en,tn,nn,sn,rn,cn,ln,un,fn,dn);Ne();export{Ne as apply,Ae as load,Mt as setAlias};
//# sourceMappingURL=datastar.js.map
